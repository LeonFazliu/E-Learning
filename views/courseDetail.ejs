<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= course.name %> - Course Details</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    .video-responsive {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 ratio */
      height: 0;
      overflow: hidden;
    }
    
    .video-responsive iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
    <%- include('partials/navbar') %>

  <div class="course-container">
    <div class="video-responsive">
      <% if (course.videoUrl && course.videoUrl.trim() !== '') { %>
        <iframe 
          src="<%= course.videoUrl.includes('youtube.com') ? course.videoUrl.replace('watch?v=', 'embed/').split('&')[0] : course.videoUrl %>" 
          title="<%= course.name %> Video" 
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen>
        </iframe>
      <% } else { %>
        <p>Video not available for this course.</p>
      <% } %>
    </div>

    <div class="course-info">
      <p><strong>Instructor:</strong> <%= course.instructor %></p>
      <p><strong>Description:</strong> <%= course.description %></p>
      <p><strong>Duration:</strong> <%= course.duration %></p>
      <p><strong>Rating:</strong> <%= course.rating || 'Not rated yet' %></p>
    </div>
  </div>
<% if (isSaved) { %>
  <form action="/courses/<%= course.id %>/remove" method="POST">
      <button type="submit" class="btn-secondary">Remove Course</button>
  </form>
<% } else { %>
  <form action="/courses/<%= course.id %>/save" method="POST">
      <button type="submit" class="btn-primary">Save Course</button>
  </form>
<% } %>



</body>
</html>
